{% extends "shared/layout-left-nav.html" %}

{% block title %}Internship Program{% endblock %}

{% block left_nav %}
{% include "internship-program/left-nav.html" %}
{% endblock %}

{% block content %}

<div class="title">
    <h2>
        Internship Program
    </h2>
    <p>
        Manage the internship program here. Create one or modify an existing internship cycle.
    </p>
</div>

{% if internshipCycle.endedAt is not null or internshipCycle is null %}
<div class="info-card">
    <a class="btn btn-primary" role="button" href="/internship-program/cycle/create">Create an internship cycle</a>
</div>
{% else %}
<div class="info-card">
    <a class="btn btn-outline-primary" role="button" href="/internship-program/cycle/end">End current internship
        cycle</a>
</div>
{% endif %}

<section>

    {% if internshipCycle.endedAt is not null or internshipCycle is null %}

    <p>There is no active internship cycle</p>

    {% else %}

    <div class="grid max-w-max grid-cols-3 xl-grid-cols-2 lg-grid-cols-1 col-gap-25 row-gap-25">

        <div class="card">
            <div class="flex items-center justify-between col-gap-30 mb-5">
                <h5 class="header">Job Collection</h5>
                <div class="flex items-start col-gap-5" id="job-collection-btn-container">
                    {% if internshipCycle.nextState == InternshipCycleState_JobCollection %}

                    <button type="button" class="btn btn-primary" id="start-job-collection-btn">Start</button>

                    {% elseif internshipCycle.activeState == InternshipCycleState_JobCollection %}

                    <button type="button" class="btn btn-secondary" id="undo-job-collection-btn">Undo</button>
                    <button type="button" class="btn btn-danger" id="end-job-collection-btn">End</button>

                    {% elseif internshipCycle.nextState == InternshipCycleState_Applying or
                    internshipCycle.activeState == InternshipCycleState_Applying %}

                    <button type="button" class="btn btn-outline-primary"
                        id="restart-job-collection-btn">Restart</button>

                    {% endif %}
                </div>
            </div>
            {% if internshipCycle.jobCollectionStart %}
            <p>
                Started on <span class="fw-semibold">{{ internshipCycle.jobCollectionStart.format('Y-m-d') }}</span>
            </p>
            {% endif %}
            {% if internshipCycle.jobCollectionEnd %}
            <p>
                Ended on <span class="fw-semibold">{{ internshipCycle.jobCollectionEnd.format('Y-m-d') }}</span>
            </p>
            {% endif %}
        </div>

        <div class="card">
            <div class="flex items-center justify-between col-gap-30 mb-5">
                <h5 class="header">Application Collection</h5>
                <div class="flex items-start col-gap-5" id="applying-btn-container">
                    {% if internshipCycle.nextState == InternshipCycleState_Applying %}

                    <button type="button" class="btn btn-primary" id="start-applying-btn">Start</button>

                    {% elseif internshipCycle.activeState == InternshipCycleState_Applying %}

                    <button type="button" class="btn btn-secondary" id="undo-applying-btn">Undo</button>
                    <button type="button" class="btn btn-danger" id="end-applying-btn">End</button>

                    {% elseif internshipCycle.nextState == InternshipCycleState_Interning or
                    internshipCycle.activeState == InternshipCycleState_Interning %}

                    <button type="button" class="btn btn-outline-primary" id="restart-applying-btn">Restart</button>

                    {% endif %}
                </div>
            </div>
            {% if internshipCycle.applyingStart %}
            <p>
                Started on <span class="fw-semibold">{{ internshipCycle.applyingStart.format('Y-m-d') }}</span>
            </p>
            {% endif %}
            {% if internshipCycle.applyingEnd %}
            <p>
                Ended on <span class="fw-semibold">{{ internshipCycle.applyingEnd.format('Y-m-d') }}</span>
            </p>
            {% endif %}
        </div>

        <div class="card">
            <div class="flex items-center justify-between col-gap-30 mb-5">
                <h5 class="header">Interning</h5>
                <div class="flex items-start col-gap-5" id="interning-btn-container">
                    {% if internshipCycle.nextState == InternshipCycleState_Interning %}

                    <button type="button" class="btn btn-primary" id="start-interning-btn">Start</button>

                    {% elseif internshipCycle.activeState == InternshipCycleState_Interning %}

                    <button type="button" class="btn btn-secondary" id="undo-interning-btn">Undo</button>
                    <button type="button" class="btn btn-danger" id="end-interning-btn">End</button>

                    {% elseif internshipCycle.interningEnd %}

                    <button type="button" class="btn btn-outline-primary" id="restart-interning-btn">Restart</button>

                    {% endif %}
                </div>
            </div>
            {% if internshipCycle.interningStart %}
            <p>
                Started on <span class="fw-semibold">{{ internshipCycle.interningStart.format('Y-m-d') }}</span>
            </p>
            {% endif %}
            {% if internshipCycle.interningEnd %}
            <p>
                Ended on <span class="fw-semibold">{{ internshipCycle.interningEnd.format('Y-m-d') }}</span>
            </p>
            {% endif %}
        </div>
    </div>

    {% endif %}

</section>
<script src="/js/internship-program/home-admin.js"></script>
{% endblock %}